<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content=ie=edge">
    <meta name = "google-signin-client_id" content = "902483045322-ame66rsf4mu0cklmgavrh4d2u5dr57f9.apps.googleusercontent.com";


    <script src = "https://apis.google.com/js/api.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">

    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
 	padding: 0;
      }
    </style>

  <link rel = "stylesheet" type = "text/css" href = "css.css">

</head>
  <body>
  <nav class="navbar navbar-default navbar-fnt navbar-backgrnd navbar-full" id="nav-main">
    		<ul class="nav navbar-nav">
    			<li class="nav-item">
    				<a class="nav-link" href="#">Home<span class="sr-only">(current)</span></a>
    			</li>
    			<li class="nav-item">
		    		<a class="navbar-brand" href="login.html"> Login</a>
		    	</li>
		    	<li class="nav-item">
		    		<a class="navbar-brand" href=""> Register</a>
		    	</li>
		    	<li class="nav-item">
		    		<a class="navbar-brand" href=""> Upload</a>
		    	</li>
		    	<li class="nav-item">
		    		<a class="navbar-brand" href="geomapCluster.html"> My map</a>
		    	</li>
		    	<li class="nav-item">
		    		<a class="navbar-brand" href=""> Mineral info</a>
		    	</li>
		    	<li class="nav-item">
		    		<a class="navbar-brand" href=""> About</a>
		    	</li>
		    </ul>
  </nav>
  <div class="container">
   <h1><center>This is your personal map handler.</center></h1>
    <center>
     <form onsubmit="click()" class="form-inline" id="createcoordinate">
      <div class="form-group">
       <input type="text" name="mapname" class="form-control form-control-lg" placeholder="Identification name">
      </div>
      <div class="form-group">
       <input type="text" name="x" class="form-control form-control-lg" placeholder="Mineral">
      </div>
      <div class="form-group">
       <input type="text" name="y"class="form-control form-control-lg" placeholder="Location">
      </div>
      <br/>
      <input type="submit" value="Action" class="btn btn-success btn-lg">
     </form>
    </center>
  </div> 

   <script type = "text/javascript">
	function click(){
		console.log("clicked");
		console.log(document.getElementById('mapname').value);
		console.log(x);
		console.log(y);
		var name = document.getElementById("mapname").value;
		if(document.getElementById("mapname") && document.getElementById("mapname").value){
			console.log("only name");
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function(){
				if(xhttp.readyState == 4){ //Can also check this.status == 500 if website is http:
 					console.log("within if()");
					document.getElementById("text").innerHTML = xhttp.responseText;
				}
			};
			xhttp.open("POST", "api/create?name="+name+"&x="+x+"&y="+y, true);
			xhttp.send(null);
		}
		
	}
   </script> 
  
  <div id="map">
    <script>
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          center: {lat: -28.024, lng: 140.887}
        });
	//Create a simple menu for markers and circles that can be placed anywhere on the map.
	var drawingManager = new google.maps.drawing.DrawingManager({
	  drawingMode: google.maps.drawing.OverlayType.MARKER,
	  drawingControl: true,
	  drawingControlOptions: {
	    position: google.maps.ControlPosition.TOP_CENTER,
	    drawingModes: ['marker','circle']
	  },
	  circleOptions: {
	    fillColor: '#fff00',
	    fillOpacity: 1,
	    strokeweight: 5,
	    clickable: false,
	    editable: true,
	    zIndex: 1
	  }
	});
	drawingManager.setMap(map);
	// Create an array of alphabetical characters used to label the markers.
        var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        // Add some markers to the map.
        // Note: The code uses the JavaScript Array.prototype.map() method to
        // create an array of markers based on a given "locations" array.
        // The map() method here has nothing to do with the Google Maps API.
        var markers = locations.map(function(location, i) {
          return new google.maps.Marker({
            position: location,
            label: labels[i % labels.length]
          });
        });
        // Add a marker clusterer to manage the markers.
        var markerCluster = new MarkerClusterer(map, markers,
            {imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});
      }
<!-- var locations = new http request 
-->
      var locations = [
        {lat: -31.563910, lng: 147.154312},
        {lat: -33.718234, lng: 150.363181},
        {lat: -33.727111, lng: 150.371124},
        {lat: -33.848588, lng: 151.209834},
        {lat: -33.851702, lng: 151.216968},
        {lat: -34.671264, lng: 150.863657},
        {lat: -35.304724, lng: 148.662905},
        {lat: -36.817685, lng: 175.699196},
        {lat: -36.828611, lng: 175.790222},
        {lat: -37.750000, lng: 145.116667},
        {lat: -37.759859, lng: 145.128708},
        {lat: -37.765015, lng: 145.133858},
        {lat: -37.770104, lng: 145.143299},
        {lat: -37.773700, lng: 145.145187},
        {lat: -37.774785, lng: 145.137978},
        {lat: -37.819616, lng: 144.968119},
        {lat: -38.330766, lng: 144.695692},
        {lat: -39.927193, lng: 175.053218},
        {lat: -41.330162, lng: 174.865694},
        {lat: -42.734358, lng: 147.439506},
        {lat: -42.734358, lng: 147.501315},
        {lat: -42.735258, lng: 147.438000},
	{lat: 59.3293234, lng: 18.0685808}
      ]
    </script>
    </div>
    <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB_O-DWv_X7RsiS9oQuqAeNCrwpJPcgrDM&signed_in=true&libraries=drawing&callback=initMap">
    </script>
  </body>
<footer>
<div id ="text">
</div>
</html>
